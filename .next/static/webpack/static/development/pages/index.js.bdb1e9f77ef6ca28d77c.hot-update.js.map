{"version":3,"file":"static/webpack/static/development/pages/index.js.bdb1e9f77ef6ca28d77c.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport FacebookLogin from 'react-facebook-login';\nimport FacebookPage from '../pages/facebookpages';\nimport Instasettings from '../pages/instasettings';\nimport Instagram from '../pages/instagram';\nimport {Frame} from '@shopify/polaris';\n\n\nclass Index extends React.Component {\n\n    constructor(props) {\n\n        console.log(props);\n\n        super(props);\n        this.state = {\n            isFBLoggedIn : true,\n            userID:'',\n            name:'',\n            email:'',\n            picture:'',\n            allpages:'',\n            fbpage : false,\n            allsettings : '',\n            post_shown:false\n\n        };\n\n        this.logoutFacebook = this.logoutFacebook.bind(this);\n        this.setnewstatus = this.setnewstatus.bind(this);\n\n    }\n\n    componentDidMount(){\n\n\n        const search = window.location.search; // could be '?foo=bar'\n        const params = new URLSearchParams(search);\n        const shop_name = params.get('shop');\n        console.log(shop_name);\n        // var shopname = this.shopname();\n        // console.log('1111');\n        // console.log(shopname);\n        // console.log('2222');\n        //\n        //\n        const postdata = {\n            shop : shop_name,\n        }\n        //\n        var self= this;\n\n        axios.post('http://localhost:5000/check_login_account/',postdata)\n            .then(function (response1) {\n                console.log(response1);\n                self.changefbstatus();\n                if(response1.data==true){\n                    axios.post('http://localhost:5000/get_fb_pages/',postdata)\n                        .then(function (response) {\n                            self.changestatus(response);\n                        })\n                        .catch(function (error) {\n                            console.log(error);\n                        });\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n\n        axios.post('http://localhost:5000/get_settings/',postdata)\n            .then(function (response1) {\n                self.setnewstatus(response1.data);\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n\n    }\n\n\n    setnewstatus(data){\n        this.setState({\n            allsettings : data\n        })\n    }\n\n    changefbstatus(){\n        this.setState({\n            isFBLoggedIn : true,\n        })\n    }\n\n    changestatus(response){\n        this.setState({\n            fbpage : true,\n            allpages : response.data\n        })\n    }\n\n\n    logoutFacebook(){\n        console.log('111');\n        this.setState({\n            isFBLoggedIn : false\n        })\n    }\n\n    setstatus(response) {\n        console.log(response);\n        this.setState({\n            isFBLoggedIn : true,\n            fbpage : true,\n            allpages : response.data\n        })\n    }\n\n    updateState() {\n        this.setState({ post_shown: false });\n    }\n\n\n       responseFacebook = (response) => {\n\n            if(response.data!='undefined'){\n                var self= this;\n\n                const search = window.location.search; // could be '?foo=bar'\n                const params = new URLSearchParams(search);\n                const shop_name = params.get('shop');\n\n                const postdata = {\n                    shop : shop_name,\n                    response : response\n                }\n\n                axios.post('http://localhost:5000/save_accesstoken/',postdata)\n                    .then(function (response1) {\n                        console.log(response1);\n                        const shopdata = {\n                            shop : shop_name\n                        }\n\n                        axios.post('http://localhost:5000/get_fb_pages/',shopdata)\n                            .then(function (response) {\n                                self.setstatus(response);\n                            })\n                            .catch(function (error) {\n                                console.log(error);\n                            });\n                    })\n                    .catch(function (error) {\n                        console.log(error);\n                    });\n            }\n\n       }\n\n\n    componentClicked = () => console.log('clieked');\n\n   render() {\n\n        let fbContent;\n\n        if(this.state.isFBLoggedIn){\n            if(this.state.fbpage){\n                fbContent = (\n                    <div>\n                        <FacebookPage alldata={this.state.allpages} />\n                    </div>\n                );\n            }\n        }else{\n            fbContent = (<FacebookLogin\n                appId=\"591251971460198\"\n                autoLoad = {true}\n                fields=\"name,email,picture\"\n                scope=\"public_profile,email,manage_pages,read_insights,pages_show_list,instagram_basic\"\n                onClick={this.componentClicked}\n                callback={this.responseFacebook}\n            />);\n        }\n\n        let instasettings;\n\n        if(this.state.allsettings!=''){\n            instasettings = (\n                <Instasettings allsettings={this.state.allsettings} />\n            );\n        }\n\n        return <div className=\"ankit\">\n            <Frame>\n            {instasettings}\n            {fbContent}\n            <Instagram />\n            </Frame>\n            </div>;\n    }\n}\n\n\n\nexport default Index;\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;AAEA;AAAA;AACA;AADA;AACA;AACA;AAEA;AACA;AALA;AAkHA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAFA;AAKA;AAEA;AACA;AACA;AADA;AAIA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAnJA;AAqJA;AAAA;AACA;AAjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAaA;AACA;AAnBA;AAqBA;AACA;;;AACA;AAGA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AACA;AAGA;AAEA;AAEA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;;;AAGA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AACA;AAFA;AAIA;;;AAGA;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;;;AAEA;AACA;AAAA;AAAA;AACA;;;AA0CA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAOA;;;;AA/LA;AACA;AAmMA;;;;A","sourceRoot":""}